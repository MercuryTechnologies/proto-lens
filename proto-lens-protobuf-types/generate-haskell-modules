#!/usr/bin/env bash

shopt -s globstar

set -x
stack exec -- protoc \
  --plugin=protoc-gen-haskell=`which proto-lens-protoc` \
  --haskell_out=$PWD/src \
  --proto_path=$PWD/proto-src \
  $PWD/proto-src/google/protobuf/any.proto \
  $PWD/proto-src/google/protobuf/api.proto \
  $PWD/proto-src/google/protobuf/descriptor.proto \
  $PWD/proto-src/google/protobuf/duration.proto \
  $PWD/proto-src/google/protobuf/empty.proto \
  $PWD/proto-src/google/protobuf/field_mask.proto \
  $PWD/proto-src/google/protobuf/source_context.proto \
  $PWD/proto-src/google/protobuf/struct.proto \
  $PWD/proto-src/google/protobuf/timestamp.proto \
  $PWD/proto-src/google/protobuf/type.proto \
  $PWD/proto-src/google/protobuf/wrappers.proto \
  $PWD/proto-src/google/protobuf/compiler/plugin.proto
